<!DOCTYPE html>

<html lang="en" class="no-js">
<!--<![endif]-->

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

  <title>Enter the Protection Notification Number</title>

  <script type="text/javascript">
    (function() {
      if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var d = document,
          c = "appendChild",
          a = d.createElement("style");
        a[c](d.createTextNode("@-ms-viewport{width:auto!important}"));
        d.getElementsByTagName("head")[0][c](a);
      }
    })();
      
      function moveOnMax(field, nextFieldID) { if (field.value.length >= field.maxLength) { nextFieldID.focus(); } }
      
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/template/assets/images/opengraph-image.png">

  <link rel="stylesheet" href="/public/application.css" />
  <link rel="stylesheet" href="/public/govuk-template.css" />

  <meta name="format-detection" content="telephone=no" />
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101661347-1', 'auto');
  ga('send', 'pageview');

    </script>
    
</head>

<body class="">
  <script type="text/javascript">
    document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');
  </script>
  <div id="skiplink-container">
    <div>
      <a href="#content" class="skiplink">Skip to main content</a>
    </div>
  </div>

  <header role="banner" id="global-header" class=" with-proposition ">
    <div class="header-wrapper">
      <div class="header-global">
        <div class="header-logo">
          <a href="https://www.gov.uk/" title="Go to the GOV.UK homepage" data-journey-click="header:Click:GOV UK" id="logo" class="content">
            <img src="/public/images/gov.uk_logotype_crown.png" alt=""> GOV.UK
          </a>
        </div>

      </div>
      <div class="header-proposition">
        <div class="content">

          <a href="#proposition-links" class="js-header-toggle menu">Menu</a>

          <nav id="proposition-menu" class="header__menu" role="navigation">

            <span class="header__menu__proposition-name">Protect your lifetime allowance</span>
            <ul id="proposition-links" class="header__menu__proposition-links">

            </ul>

          </nav>
        </div>
      </div>
    </div>
  </header>

  <div id="global-cookie-message">
    <p>GOV.UK uses cookies to make the site simpler. <a href="/help/cookies">Find out more about cookies</a></p>
  </div>

  <main id="wrapper" role="main">
    <div class="centered-content">
      <div class="service-info" style="border-top: 10px solid #005ea5">
        <div class="logo">
          <span class="organisation-logo organisation-logo-medium">HM Revenue &amp; Customs</span>
        </div>
      </div>

    </div>
    <div id="content">

      <article class="content__body">

        <p class="">English | Cymraeg</p>
          
          <h1> Enter the Protection Notification Number</h1>
        
        <div class="flash error-summary " id="error-summary-display" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
          <h2 id="error-summary-heading" class="h3-heading">Something you’ve entered isn’t valid</h2>
          <ul class="js-error-summary-messages" id="errorsummarylist">
          </ul>
        </div>

        <form>
          <div class="form-group">
            <fieldset class="form-field-group">
                
              <div id="ltaref" class="form-field">

                    <div id="ltareferr"></div>
                    <p class="form-field--hint">Example: IP141234567890A</p>
                    <input type="text" name="lifetimeAllowanceReference" id="lifetimeAllowanceReference" class="input--medium input--cleared uppercase" maxlength="15" style="width: 300px; float: left;"/>
              </div>
            </fieldset>
          </div>
          <input class="button" type="submit" name="submit" value="Continue" onclick="formvalidate();return false">
        </form>
          <br>
        <a class="back-link" href="/start.html">Back</a>

      </article>

      <div class="report-error">
        <script type="text/javascript">
          var reportProblemAjaxUrl = "http://localhost:9250/contact/problem_reports_ajax?service=PLA";
        </script>
        <a class="report-error__toggle js-visible" id="get-help-action" href="form-label">Get help with this page.</a>
        <a class="report-error__toggle js-hidden" href="http://localhost:9250/contact/problem_reports_nonjs?service=PLA">Get help with this page.</a>
        <div id="report-error-partial-form" class="report-error__content hidden">
          <div class="report-error__loading"></div>
        </div>
      </div>

    </div>
  </main>


  <footer class="group js-footer" id="footer" role="contentinfo">

    <div class="footer-wrapper">

      <div class="footer-meta">
        <div class="footer-meta-inner">

          <ul class="platform-help-links">
            <li><a href="/help/cookies" target="_blank" data-sso="false" data-journey-click="footer:Click:Cookies">Cookies</a></li>
            <li><a href="/help/privacy" target="_blank" data-sso="false" data-journey-click="footer:Click:Privacy policy">Privacy policy</a></li>
            <li><a href="/help/terms-and-conditions" target="_blank" data-sso="false" data-journey-click="footer:Click:Terms and conditions">Terms and conditions</a></li>
            <li><a href="https://www.gov.uk/help" target="_blank" data-sso="false" data-journey-click="footer:Click:Help">Help using GOV.UK</a></li>
          </ul>

          <div class="open-government-licence">
            <h2><a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3" target="_blank"><img src="/public/images/open-government-licence_2x.png" style="width: 43px; height: 17px" alt="Open Government Licence"></a></h2>
            <p>All content is available under the <a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3" target="_blank">Open Government Licence v3.0</a>, except where otherwise stated</p>
          </div>
        </div>

        <div class="copyright">
          <a href="http://www.nationalarchives.gov.uk/information-management/our-services/crown-copyright.htm" target="_blank">&copy; Crown Copyright</a>
        </div>
      </div>
    </div>
  </footer>

  <!--end footer-->

  <div id="global-app-error" class="app-error hidden"></div>

  <script type="text/javascript">
    var ssoUrl = "";
  </script>
  <script src="http://localhost:9032/assets/2.222.0/javascripts/application.min.js" type="text/javascript"></script>

  <script>
    function ltarefvalidate(input) {
      var ltaregex1 = /^IP14[0-9]{10}[ABCDEFGHJKLMNPRSTXYZ]$/;
      var ltaregex2 = /^IP16[0-9]{10}[ABCDEFGHJKLMNPRSTXYZ]$/;
      var ltaregex3 = /^FP16[0-9]{10}[ABCDEFGHJKLMNPRSTXYZ]$/;
      var tpsregex = /^[1-9A][0-9]{6}[ABCDEFHXJKLMNYPQRSTZW]$/;
      var result = (ltaregex1.test(input) || ltaregex2.test(input) || ltaregex3.test(input) || tpsregex.test(input)) ? false : true;
      return result;
    }

    function formvalidate() {
      var psaref, ltaref, psareferr, ltareferr, err, errorsummarylist;

      err = false;

      errorsummarylist = document.getElementById("errorsummarylist");
      ltareferr = "";
      ltaref = document.getElementById("lifetimeAllowanceReference").value;

      //LTA ref validation
      if (ltaref == "") {
        ltareferr = "Enter a Protection Notification Number";
        document.getElementById("ltareferr").innerHTML = ltareferr;
        document.getElementById("ltareferr").className = "error-notification";
        document.getElementById("ltaref").className = "form-field form-field--error fields-aligned";
        err = true;
      } else if (ltarefvalidate(ltaref.toUpperCase())) {
        ltareferr = "The Protection Notification Number you entered isn’t correct";
        document.getElementById("ltareferr").innerHTML = ltareferr;
        document.getElementById("ltareferr").className = "error-notification";
        document.getElementById("ltaref").className = "form-field form-field--error fields-aligned";
        err = true;
      } else {
        document.getElementById("ltareferr").innerHTML = "";
        document.getElementById("ltareferr").className = "";
        document.getElementById("ltaref").className = "form-field";
      }

      while (errorsummarylist.firstChild) {
        errorsummarylist.removeChild(errorsummarylist.firstChild);
      }

      if (err) {
        document.getElementById("error-summary-display").className = "flash error-summary error-summary--show";
        if (ltareferr != "") {
          var entry = document.createElement('li');
          entry.appendChild(document.createTextNode(ltareferr));
          errorsummarylist.appendChild(entry);
        }
      } else {
        document.getElementById("error-summary-display").className = "flash error-summary";
        switch (ltaref.toUpperCase()) {
          default:
            window.location.href = "/entryAltPSA.html";
        }
      }
    }
  </script>

</body>

</html>